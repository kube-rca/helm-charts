# Istio istiod values for kube-rca
# Upstream chart baseline: istio/istiod 1.28.2

global:
  istioNamespace: istio-system
  # Split ownership with istio-base app to avoid ArgoCD shared-resource conflicts.
  # istio-base: cluster scope (CRDs / cluster-scoped resources)
  # istio-istiod: namespace scope (deployment / configmaps / serviceaccounts)
  resourceScope: namespace

  # Keep proxy tracer disabled to rely on meshConfig extensionProviders.
  proxy:
    tracer: none
    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 200m
        memory: 512Mi

# Pilot tracing env (PILOT_TRACE_SAMPLING)
traceSampling: 100

# Mesh config used to generate istio configmap.
meshConfig:
  defaultConfig:
    tracing:
      sampling: 100.0
  extensionProviders:
    - name: otel-tracing
      opentelemetry:
        service: tempo.monitoring.svc.cluster.local
        port: 4317
  defaultProviders:
    metrics:
      - prometheus
    tracing:
      - otel-tracing
