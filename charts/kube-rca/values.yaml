# Default values for kube-rca.

# -- Override the name of the chart.
nameOverride: ""

# -- Override the full name of the release.
fullnameOverride: ""

backend:
  # -- Number of backend replicas.
  replicaCount: 1
  image:
    # -- Backend image repository.
    repository: ""
    # -- Backend image tag.
    tag: ""
    # -- Backend image pull policy.
    pullPolicy: IfNotPresent
  service:
    # -- Backend service type.
    type: ClusterIP
    # -- Backend service port.
    port: 8080
  # -- Backend container port.
  containerPort: 8080
  ingress:
    # -- Enable backend ingress.
    enabled: false
    # -- IngressClass name for backend ingress.
    ingressClassName: ""
    # -- Annotations for backend ingress.
    annotations: {}
    # -- Hostnames for backend ingress.
    hosts: []
    # -- Paths for backend ingress.
    paths:
      - /
    # -- PathType for backend ingress.
    pathType: Prefix
    # -- TLS configuration for backend ingress.
    tls: []
  # -- Backend resource requests/limits.
  resources: {}
  # -- Node labels for backend pods assignment.
  nodeSelector: {}
  # -- Tolerations for backend pods assignment.
  tolerations: []
  # -- Affinity for backend pods assignment.
  affinity: {}
  embedding:
    provider: "gemini"
    model: "gemini-embedding-001"
    apiKey:
      existingSecret: "kube-rca-agent-secret"
      key: "ai-studio-api-key"

  postgresql:
    # -- PostgreSQL host.
    host: "postgresql.kube-rca.svc.cluster.local"
    # -- PostgreSQL port.
    port: 5432
    # -- PostgreSQL user.
    user: "kube-rca"
    # -- PostgreSQL database.
    database: "kube-rca"

  slack:
    # -- Enable Slack notifications.
    enabled: true
    # -- Slack bot token (used when backend.slack.source=values).
    token: ""
    # -- Slack channel ID (used when backend.slack.source=values).
    channelId: ""

    secret:
      # -- Existing Secret name for Slack credentials.
      existingSecret: kube-rca-slack
      # -- Secret key for Slack bot token.
      tokenKey: kube-rca-slack-token
      # -- Secret key for Slack channel ID.
      channelIdKey: kube-rca-slack-channel-id

  auth:
    # -- Enable backend auth.
    enabled: true
    # -- Allow user signup (ALLOW_SIGNUP).
    allowSignup: false
    admin:
      # -- Admin login ID (default: kube-rca).
      username: "kube-rca"
      # -- Admin password (default: kube-rca).
      password: "kube-rca"
    jwt:
      # -- JWT secret (auto-generated when empty and no existingSecret).
      secret: ""
      # -- Access token TTL (e.g. 15m).
      accessTtl: "15m"
      # -- Refresh token TTL (e.g. 168h).
      refreshTtl: "168h"
    cookie:
      # -- Cookie secure flag (AUTH_COOKIE_SECURE).
      secure: true
      # -- Cookie SameSite (AUTH_COOKIE_SAMESITE).
      sameSite: "Lax"
      # -- Cookie domain (AUTH_COOKIE_DOMAIN).
      domain: ""
      # -- Cookie path (AUTH_COOKIE_PATH).
      path: "/"
    cors:
      # -- Allowed origins (CORS_ALLOWED_ORIGINS), comma-separated when rendered.
      allowedOrigins: []
    secret:
      # -- Existing Secret name for auth credentials (ExternalSecret 연계 시 사용, default keys: admin-username/admin-password/kube-rca-jwt-secret).
      existingSecret: ""
      # -- Custom Secret name for chart-managed auth Secret.
      name: ""
      keys:
        # -- Secret key for admin login ID.
        adminUsername: admin-username
        # -- Secret key for admin password.
        adminPassword: admin-password
        # -- Secret key for JWT secret.
        jwtSecret: kube-rca-jwt-secret

agent:
  # -- Number of agent replicas.
  replicaCount: 1
  image:
    # -- Agent image repository.
    repository: ""
    # -- Agent image tag.
    tag: ""
    # -- Agent image pull policy.
    pullPolicy: IfNotPresent
  service:
    # -- Agent service type.
    type: ClusterIP
    # -- Agent service port.
    port: 8000
  # -- Agent container port.
  containerPort: 8000
  ingress:
    # -- Enable agent ingress.
    enabled: false
    # -- IngressClass name for agent ingress.
    ingressClassName: ""
    # -- Annotations for agent ingress.
    annotations: {}
    # -- Hostnames for agent ingress.
    hosts: []
    # -- Paths for agent ingress.
    paths:
      - /
    # -- PathType for agent ingress.
    pathType: Prefix
    # -- TLS configuration for agent ingress.
    tls: []
  # -- Agent resource requests/limits.
  resources: {}
  # -- Agent log level (LOG_LEVEL).
  logLevel: "info"
  k8s:
    # -- Kubernetes API timeout in seconds.
    apiTimeoutSeconds: 5
    # -- Kubernetes event limit.
    eventLimit: 20
    # -- Kubernetes log tail lines.
    logTailLines: 50
  prometheus:
    # -- Prometheus service label selector.
    labelSelector: "app=kube-prometheus-stack-prometheus"
    # -- Prometheus namespace allowlist (empty = all).
    namespaceAllowlist: []
    # -- Prometheus service port name (empty = auto).
    portName: ""
    # -- Prometheus scheme.
    scheme: "http"
    # -- Prometheus HTTP timeout in seconds.
    httpTimeoutSeconds: 5
  gemini:
    # -- Gemini model ID for Strands Agents.
    modelId: "gemini-3-flash-preview"
    secret:
      # -- Create a Secret for the Gemini API key.
      create: false
      # -- Existing Secret name for the Gemini API key.
      existingSecret: "kube-rca-agent-secret"
      # -- Secret key name for the Gemini API key.
      key: "ai-studio-api-key"
  # -- Node labels for agent pods assignment.
  nodeSelector: {}
  # -- Tolerations for agent pods assignment.
  tolerations: []
  # -- Affinity for agent pods assignment.
  affinity: {}

frontend:
  # -- Number of frontend replicas.
  replicaCount: 1
  image:
    # -- Frontend image repository.
    repository: ""
    # -- Frontend image tag.
    tag: ""
    # -- Frontend image pull policy.
    pullPolicy: IfNotPresent
  service:
    # -- Frontend service type.
    type: ClusterIP
    # -- Frontend service port.
    port: 80
  # -- Frontend container port.
  containerPort: 80
  ingress:
    # -- Enable frontend ingress.
    enabled: false
    # -- IngressClass name for frontend ingress.
    ingressClassName: ""
    # -- Annotations for frontend ingress.
    annotations: {}
    # -- Hostnames for frontend ingress.
    hosts: []
    # -- Paths for frontend ingress.
    paths:
      - /
    # -- PathType for frontend ingress.
    pathType: Prefix
    # -- TLS configuration for frontend ingress.
    tls: []
  # -- Frontend resource requests/limits.
  resources: {}
  # -- Node labels for frontend pods assignment.
  nodeSelector: {}
  # -- Tolerations for frontend pods assignment.
  tolerations: []
  # -- Affinity for frontend pods assignment.
  affinity: {}

openapi:
  # -- Enable OpenAPI (Swagger UI) deployment.
  enabled: false
  # -- Number of OpenAPI replicas.
  replicaCount: 1
  image:
    # -- OpenAPI UI image repository.
    repository: "swaggerapi/swagger-ui"
    # -- OpenAPI UI image tag.
    tag: "v5.31.0"
    # -- OpenAPI UI image pull policy.
    pullPolicy: IfNotPresent
  service:
    # -- OpenAPI service type.
    type: ClusterIP
    # -- OpenAPI service port.
    port: 8080
  # -- OpenAPI container port.
  containerPort: 8080
  # -- Base URL for Swagger UI.
  baseUrl: "/"
  ingress:
    # -- Enable OpenAPI ingress.
    enabled: false
    # -- IngressClass name for OpenAPI ingress.
    ingressClassName: ""
    # -- Annotations for OpenAPI ingress.
    annotations: {}
    # -- Hostnames for OpenAPI ingress.
    hosts: []
    # -- Paths for OpenAPI ingress.
    paths:
      - /
    # -- PathType for OpenAPI ingress.
    pathType: Prefix
    # -- TLS configuration for OpenAPI ingress.
    tls: []
  specs:
    backend:
      # -- Display name for backend spec.
      name: "backend"
      # -- Backend OpenAPI path.
      path: "/openapi.json"
      service:
        # -- Backend service name override (empty = chart default).
        name: ""
        # -- Backend service port.
        port: 8080
    agent:
      # -- Display name for agent spec.
      name: "agent"
      # -- Agent OpenAPI path.
      path: "/openapi.json"
      service:
        # -- Agent service name override (empty = chart default).
        name: ""
        # -- Agent service port.
        port: 8000
  # -- OpenAPI resource requests/limits.
  resources: {}
  # -- Node labels for OpenAPI pods assignment.
  nodeSelector: {}
  # -- Tolerations for OpenAPI pods assignment.
  tolerations: []
  # -- Affinity for OpenAPI pods assignment.
  affinity: {}
